{% extends "base.html" %}

{% block title %}Dashboard - Book Generator{% endblock %}

{% block content %}
<div class="card">
    <h2>üìä Dashboard</h2>
    
    {% if pending %}
    <div style="background: #fff3cd; padding: 15px; border-radius: 5px; margin-bottom: 20px;">
        <strong>‚ö†Ô∏è Pending Actions:</strong>
        <ul style="margin-top: 10px; padding-left: 20px;">
            {% for p in pending %}
            <li>
                <a href="{{ url_for('book_detail', book_id=p.book_id) }}">{{ p.title }}</a>
                - {{ p.next_action }}
            </li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}
    
    <div class="actions" style="margin-bottom: 20px;">
        <a href="{{ url_for('create_book') }}" class="btn btn-primary">+ Create New Book</a>
    </div>
</div>

<div class="card">
    <h2>üìö All Books</h2>
    
    {% if books %}
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Title</th>
                <th>Status</th>
                <th>Created</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for book in books %}
            <tr>
                <td>{{ book.id }}</td>
                <td>
                    <a href="{{ url_for('book_detail', book_id=book.id) }}">
                        {{ book.title }}
                    </a>
                </td>
                <td>
                    <span class="status-badge status-{{ book.output_status }}">
                        {{ book.output_status }}
                    </span>
                </td>
                <td>{{ book.created_at[:10] if book.created_at else 'N/A' }}</td>
                <td>
                    <a href="{{ url_for('book_detail', book_id=book.id) }}" class="btn btn-sm btn-secondary">
                        View
                    </a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p style="text-align: center; color: #666; padding: 40px;">
        No books yet. <a href="{{ url_for('create_book') }}">Create your first book!</a>
    </p>
    {% endif %}
</div>
{% endblock %}
